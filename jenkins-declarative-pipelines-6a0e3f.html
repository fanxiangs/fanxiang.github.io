<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ“–&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>Jenkins:Â Declarative Pipelines&nbsp;|&nbsp;CookBook</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="Jenkins:Â Declarative Pipelines">
  
    <meta name="description" content="æ‹¥æŠ± Declarative Pipeline ">
    <meta property="og:description" content="æ‹¥æŠ± Declarative Pipeline ">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ“–&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;ğŸ˜€&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">Jenkins:Â Declarative Pipelines</h1>
    
      <div class="DateTagBar">
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--purple">
            <a href="tag/Jenkins.html">Jenkins</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/6a0e3f59f2d54a279287067f982fd6aa" class="PageRoot PageRoot--FullWidth"><ul id="https://www.notion.so/6e5959f715d94c1cb54fcbc77f30c840" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/21d58a9d28344853be62df3e97c0d7f3"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Scripted Pipelines Versus Declarative Pipelines</strong></strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/eb9aa8a9bb464a10892540be13965720"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">The Structure</strong></strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6bcca8dfd8e6471292b6718eb05b2915"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Block</strong></strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6146f70cd3b14cc18520ff7db33f32c6"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Section</strong></strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/33eff34dd893489f9701c3f981c26805"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">Directives</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d050a5b7ec5f4e959d3068ad63bc6a47"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">Steps</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/60a9f380f69d4b47860e6f7ef6511454"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">Conditionals</span></span></div></a></li></ul><div id="https://www.notion.so/869fd7b298444ba38f19cabdb9b0dfc7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Jenkins Declarative Pipeline æ˜¯ä¸€ç§ä»¥å£°æ˜æ–¹å¼å®šä¹‰å’Œæ‰§è¡Œæµæ°´çº¿çš„æ–¹æ³•ã€‚å®ƒæ˜¯ Jenkins Pipeline å¦ä¸€ä¸ªæ¼”å˜ï¼Œæ—¨åœ¨æä¾›ä¸€ç§æ›´ç®€æ´ã€å¯è¯»æ€§æ›´å¥½çš„æµæ°´çº¿ç¼–å†™æ–¹å¼ã€‚</span></span></p></div><div id="https://www.notion.so/38447b896dc04124a5f887b060d4103a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Jenkins Declarative Pipeline çš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/efbd3667b5d647d8bd14349fd217a087" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ç»“æ„åŒ–å®šä¹‰</strong></span><span class="SemanticString">: æµæ°´çº¿ç”±å¤šä¸ªé˜¶æ®µï¼ˆstageï¼‰ç»„æˆï¼Œæ¯ä¸ªé˜¶æ®µåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤ï¼ˆstepï¼‰ã€‚è¿™ç§ç»“æ„åŒ–çš„å®šä¹‰ä½¿å¾—æµæ°´çº¿æ›´æ˜“äºç»„ç»‡å’Œç®¡ç†ã€‚</span></span></li><li id="https://www.notion.so/6bfa4fcf8957452d803c5cdb8a698fb6" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">å¯è¯»æ€§å’Œæ˜“ç»´æŠ¤</strong></span><span class="SemanticString">: å£°æ˜æ€§çš„è¯­æ³•ä½¿å¾—æµæ°´çº¿è„šæœ¬æ›´æ˜“äºé˜…è¯»å’Œç†è§£ã€‚æä¾›äº†æ›´æ¸…æ™°ã€æ›´ç®€æ´çš„è¯­æ³•ç»“æ„ï¼Œä½¿å¾—æµæ°´çº¿çš„æ„å›¾æ›´æ˜ç¡®ï¼ŒåŒæ—¶å‡å°‘äº†å†—ä½™å’Œé‡å¤çš„ä»£ç ã€‚</span></span></li><li id="https://www.notion.so/c55ecfe70013444384639fb3cdbd3fea" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ç®€å•æ˜“ç”¨</strong></span><span class="SemanticString">ï¼šæä¾›ç•Œé¢åŒ–è¡¨å•å®šä¹‰ä»»åŠ¡çš„æ–¹å¼åˆ›å»º pipeline</span></span></li><li id="https://www.notion.so/869c8c3d611644e899b63d98d5bf454f" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">å¯æ‰©å±•æ€§</strong></span><span class="SemanticString">: æä¾›äº†ä¸°å¯Œçš„æ’ä»¶å’Œå†…ç½®å‡½æ•°ï¼Œå¯ä»¥è½»æ¾åœ°æ‰©å±•æµæ°´çº¿çš„åŠŸèƒ½ã€‚å¯ä»¥ä½¿ç”¨æ’ä»¶æ¥é›†æˆå…¶ä»–å·¥å…·ã€æ‰§è¡Œç‰¹å®šçš„æ“ä½œï¼Œå¹¶æ ¹æ®éœ€è¦è‡ªå®šä¹‰æµæ°´çº¿çš„è¡Œä¸ºã€‚</span></span></li><li id="https://www.notion.so/e95132cd2f4a43099b2c0d0d325519a7" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">å¯è§†åŒ–å’ŒæŠ¥å‘Š</strong></span><span class="SemanticString">: Jenkins æä¾›äº†å¯è§†åŒ–ç•Œé¢æ¥å±•ç¤ºå’Œç›‘æ§æµæ°´çº¿çš„æ‰§è¡Œè¿‡ç¨‹ã€‚å¯ä»¥è½»æ¾åœ°æŸ¥çœ‹æµæ°´çº¿çš„çŠ¶æ€ã€æ—¥å¿—å’ŒæŠ¥å‘Šï¼Œä»¥ä¾¿è¿›è¡Œæ•…éšœæ’æŸ¥å’Œæ€§èƒ½åˆ†æã€‚</span></span></li></ol><h1 id="https://www.notion.so/21d58a9d28344853be62df3e97c0d7f3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/21d58a9d28344853be62df3e97c0d7f3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Scripted Pipelines Versus Declarative Pipelines</strong></strong></span></span></h1><div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div><h1 id="https://www.notion.so/eb9aa8a9bb464a10892540be13965720" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/eb9aa8a9bb464a10892540be13965720"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">The Structure</strong></strong></span></span></h1><div id="https://www.notion.so/1c817b9e377b4914b5659aa9182c0a58" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Declarative Pipeline æ˜¯ç”±åŒ…å«æŒ‡ä»¤ï¼ˆdirectivesï¼‰å’Œéƒ¨åˆ†ï¼ˆsectionsï¼‰ç»„æˆçš„å—ï¼ˆblockï¼‰ã€‚ æ¯ä¸ªéƒ¨åˆ†åˆå¯ä»¥åŒ…å«å…¶ä»–éƒ¨åˆ†ã€æŒ‡ä»¤å’Œæ­¥éª¤ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è¿˜åŒ…å«æ¡ä»¶ã€‚ å—ã€éƒ¨åˆ†å’ŒæŒ‡ä»¤ä¹‹é—´çš„åŒºåˆ«æœ‰äº›éšæ„ï¼Œä½†ç”±äºå®ƒä»¬å‡ºç°åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œæ‰€æœ‰ä¸‹é¢æˆ‘ä»¬å°†ææ¸…è¿™äº›æœ¯è¯­çš„å®šä¹‰ã€‚</span></span></p></div><h2 id="https://www.notion.so/6bcca8dfd8e6471292b6718eb05b2915" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/6bcca8dfd8e6471292b6718eb05b2915"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Block</strong></strong></span></span></h2><div id="https://www.notion.so/9e761c06247d49588e63f1a8d10783b2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Block æ˜¯æŒ‡å…·æœ‰å¼€å¤´ç»“å°¾çš„ä»£ç é›†ï¼Œåœ¨ Groovy ä¸­ï¼Œæˆ‘ä»¬ç§°ä¸º clousreï¼ˆé—­åŒ…ï¼‰ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</span></span></p></div><pre id="https://www.notion.so/c8ba80adb6f5411896569b51f16b2118" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
 // code in declarative syntax 
}</span></span></span></code></pre><h2 id="https://www.notion.so/6146f70cd3b14cc18520ff7db33f32c6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/6146f70cd3b14cc18520ff7db33f32c6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Section</strong></strong></span></span></h2><div id="https://www.notion.so/a47f6b36750843e2902403478ca54851" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æµæ°´çº¿è¢«åˆ’åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼ˆSectionsï¼‰ï¼Œæ¯ä¸ªéƒ¨åˆ†å®šä¹‰äº†ç‰¹å®šçš„åŠŸèƒ½å’Œè¡Œä¸ºã€‚</span></span></p></div><div id="https://www.notion.so/a62b8a0f709b4ffc8ff8e4ad3934b548" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Section å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªåŒºåŸŸï¼š</span></span></p></div><div id="https://www.notion.so/64774b8e4d5444fba1e71c2cf4abd9a4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">stagesï¼šå®šä¹‰äº†æµæ°´çº¿çš„ä¸åŒé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤ï¼ˆstepsï¼‰ã€‚é€šè¿‡åœ¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">stages</strong></code></span><span class="SemanticString"> ä¸­å®šä¹‰å¤šä¸ªé˜¶æ®µï¼Œå¯ä»¥å°†æµæ°´çº¿åˆ’åˆ†ä¸ºä¸åŒçš„ä»»åŠ¡ï¼Œå¹¶åœ¨éœ€è¦æ—¶å¹¶è¡Œæˆ–ä¸²è¡Œæ‰§è¡Œ</span></span></p></div><div id="https://www.notion.so/903b67defc8642f3bec02eaadb9337af" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">stepsï¼šåŒ…å«äº†æµæ°´çº¿ä¸­çš„å…·ä½“æ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤å®šä¹‰äº†ä¸€ä¸ªç‰¹å®šçš„æ“ä½œæˆ–ä»»åŠ¡ã€‚å¯ä»¥ä½¿ç”¨å†…ç½®çš„æ­¥éª¤ï¼ˆå¦‚æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„è„šæœ¬æ­¥éª¤æ¥æ‰§è¡Œæ›´å¤æ‚çš„æ“ä½œ</span></span></p></div><div id="https://www.notion.so/f30746411d8d474d99843960844272cf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">postsï¼šå®šä¹‰äº†åœ¨æµæ°´çº¿æ‰§è¡Œå®Œæˆåè¦æ‰§è¡Œçš„æ“ä½œï¼Œå¦‚å‘é€é€šçŸ¥ã€è§¦å‘å…¶ä»–ä»»åŠ¡ç­‰ã€‚å¯ä»¥å®šä¹‰å¤šä¸ªåå¤„ç†æ“ä½œï¼Œå¹¶æ ¹æ®æ‰§è¡Œç»“æœè¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚</span></span></p></div><pre id="https://www.notion.so/7cf5dc04619d464da43263128e707ba1" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
  agent any
  stages { 
     stage(&#x27;name1&#x27;) { 
       steps {      
          ...
       } 
       post {
         ...
       }
     }
     stage(&#x27;name2&#x27;) {
       steps {
          ...
       }
     }
  }
  post {
    ...
  } 
}</span></span></span></code></pre><h2 id="https://www.notion.so/33eff34dd893489f9701c3f981c26805" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/33eff34dd893489f9701c3f981c26805"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Directives</span></span></h2><div id="https://www.notion.so/826e9a5bec5a4ff2b199f0ed46f44f4f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Directiveï¼ˆæŒ‡ä»¤ï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ç»“æ„ï¼Œç”¨äºåœ¨æµæ°´çº¿ä¸­æŒ‡å®šç‰¹å®šçš„è¡Œä¸ºå’Œé…ç½®é€‰é¡¹ã€‚Directives å…è®¸åœ¨æµæ°´çº¿ä¸­è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶å’Œå®šåˆ¶ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸è§çš„ Directiveï¼š</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/c83c4a53648a47419f91f23b9dc17386" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">Defines values</span></span><div id="https://www.notion.so/e73ba7981a9d4c2faf2ef9e009c0cb64" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">agent</strong></code></span><span class="SemanticString"> ï¼šæŒ‡å®šæµæ°´çº¿æ‰§è¡Œæ‰€éœ€çš„è¿è¡Œç¯å¢ƒï¼Œagent (&#x27;worker&#x27;)ã€‚</span></span></p></div></li><li id="https://www.notion.so/d66443cd840945ed96570490cef85cb5" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">Configures behavior</span></span><div id="https://www.notion.so/591b2f92dd94459baf32fb3a2d5de580" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">trigger</strong></code></span><span class="SemanticString">ï¼š  triggers { cron (&#x27;0 7 0 0 1-5&#x27;) }</span></span></p></div></li><li id="https://www.notion.so/221f716a54e248809e7bc1192b9873ae" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">Specifies actions to be done </span></span><div id="https://www.notion.so/ae60e50deadf4a048e0db08db899d26d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">stage</code></span><span class="SemanticString"> ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«è¦æ‰§è¡Œ DSL çš„ step ã€‚</span></span></p></div></li></ol><h2 id="https://www.notion.so/d050a5b7ec5f4e959d3068ad63bc6a47" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d050a5b7ec5f4e959d3068ad63bc6a47"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Steps</span></span></h2><div id="https://www.notion.so/0aec27f3a1f3456ca816451c88b330c4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Stepï¼ˆæ­¥éª¤ï¼‰æ˜¯æŒ‡åœ¨æµæ°´çº¿ä¸­æ‰§è¡Œçš„æœ€å°å•å…ƒæ“ä½œã€‚æ¯ä¸ª Step æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡æˆ–æ“ä½œï¼Œå¦‚æ„å»ºä»£ç ã€è¿è¡Œæµ‹è¯•ã€éƒ¨ç½²åº”ç”¨ç¨‹åºç­‰ã€‚</span></span></p></div><h2 id="https://www.notion.so/60a9f380f69d4b47860e6f7ef6511454" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/60a9f380f69d4b47860e6f7ef6511454"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Conditionals</span></span></h2><div id="https://www.notion.so/3ae11a9890b84cc181742ebce6815097" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Conditionals ç”¨äºæ ¹æ®ç‰¹å®šçš„æ¡ä»¶æ¥æ§åˆ¶æµæ°´çº¿ä¸­çš„æ‰§è¡Œæ­¥éª¤ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§æ¡ä»¶è¯­å¥ï¼š</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/ab48103c59734665886bfac6f15347dd" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">when</strong></code></span><span class="SemanticString"> ï¼š</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">when</strong></code></span><span class="SemanticString"> æ¡ä»¶ç”¨äºåœ¨æµæ°´çº¿ä¸­æ ¹æ®ç‰¹å®šæ¡ä»¶åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæŸä¸ªé˜¶æ®µã€‚å¯ä»¥æ ¹æ®è¡¨è¾¾å¼ã€ç¯å¢ƒå˜é‡æˆ–å…¶ä»–æ¡ä»¶æ¥æŒ‡å®šæ‰§è¡Œæˆ–è·³è¿‡é˜¶æ®µã€‚</span></span><pre id="https://www.notion.so/3f797381b30845fe866e6e0ad29d61b2" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>stage(&#x27;Build&#x27;) {
    when {
        expression { env.BRANCH_NAME == &#x27;master&#x27; }
    }
    steps {
        // æ‰§è¡Œæ„å»ºæ­¥éª¤
    }
}</span></span></span></code></pre></li><li id="https://www.notion.so/324217df6dc74e4c9a08e688015110df" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"> </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">script</strong></code></span><span class="SemanticString"> ï¼š</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">script</strong></code></span><span class="SemanticString"> æ¡ä»¶ç”¨äºåœ¨æµæ°´çº¿ä¸­æ‰§è¡Œè‡ªå®šä¹‰çš„ Groovy è„šæœ¬ï¼Œå¹¶æ ¹æ®è„šæœ¬çš„è¿”å›å€¼åˆ¤æ–­æ˜¯å¦æ‰§è¡Œé˜¶æ®µæˆ–æ­¥éª¤ã€‚</span></span><pre id="https://www.notion.so/c82266b6249b400eb6f22490c581a963" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>stage(&#x27;Deployment&#x27;) {
    when {
        script {
            return params.DEPLOY_ENV == &#x27;production&#x27;
        }
    }
    steps {
        // æ‰§è¡Œéƒ¨ç½²æ­¥éª¤
    }
}</span></span></span></code></pre></li><li id="https://www.notion.so/4b51ea932e0f4c96998a2befab2bf690" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">environment</strong></code></span><span class="SemanticString"> ï¼š</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">environment</strong></code></span><span class="SemanticString"> æ¡ä»¶ç”¨äºåœ¨æµæ°´çº¿ä¸­æ ¹æ®ç¯å¢ƒå˜é‡çš„å€¼åˆ¤æ–­æ˜¯å¦æ‰§è¡Œç‰¹å®šçš„é˜¶æ®µæˆ–æ­¥éª¤ã€‚</span></span><pre id="https://www.notion.so/ec6eb74963b54174a0a06055e9df40d7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>stage(&#x27;Testing&#x27;) {
    when {
        environment name: &#x27;TESTING_ENABLED&#x27;, value: &#x27;true&#x27;
    }
    steps {
        // æ‰§è¡Œæµ‹è¯•æ­¥éª¤
    }
}</span></span></span></code></pre><h1 id="https://www.notion.so/4bc31236fb674f80932e92408bf6a231" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/4bc31236fb674f80932e92408bf6a231"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">The Building Blocks</strong></strong></span></span></h1><div id="https://www.notion.so/588e18acee5a4458af213390d090e9a1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»åœ¨å£°æ˜å¼æµæ°´çº¿ä¸­æ¯ä¸ªéƒ¨åˆ†å’ŒæŒ‡ä»¤çš„å…·ä½“å†…å®¹ï¼ŒåŒ…æ‹¬è¯­æ³•ã€å‚æ•°å’Œç¤ºä¾‹ç”¨æ³•ã€‚</span></span></p></div><div id="https://www.notion.so/213084c703de4aa48aa3f9223a1c2580" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æˆ‘ä»¬ä»æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæµæ°´çº¿çš„æ„æˆå¦‚å›¾æ‰€ç¤ºã€‚pipeline æ˜¯åœ¨æœ€å¤–å±‚ï¼Œæ‰€æœ‰çš„æŒ‡ä»¤å’Œç»“æ„éƒ½åœ¨å…¶ä¸­ã€‚è™šæ¡†ä»£è¡¨å¯é€‰ï¼Œå®æ¡†ä»£è¡¨å¿…æœ‰ã€‚è¯·æ³¨æ„ï¼Œæœ‰ä¸€äº›æŒ‡ä»¤å¯ä»¥ä¸åŒé˜¶æ®µçº§åˆ«åŒæ—¶å‡ºç°ã€‚å®ƒä»¬åœ¨ä¸€ä¸ªåŒºåŸŸå¯èƒ½æ˜¯å¿…éœ€çš„ï¼Œåœ¨å¦ä¸€ä¸ªåŒºåŸŸå¯èƒ½æ˜¯å¯é€‰çš„ã€‚</span></span></p></div><div id="https://www.notion.so/bfb8425f7ced42618b0001cd7dbcd1b1" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fdf29d01d-4f16-4eb2-b470-161d3f44f482%2Fj2ur_0702.png?width=698&amp;table=block&amp;id=bfb8425f-7ced-4261-8b00-01cd7dbcd1b1"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fdf29d01d-4f16-4eb2-b470-161d3f44f482%2Fj2ur_0702.png?width=698&amp;table=block&amp;id=bfb8425f-7ced-4261-8b00-01cd7dbcd1b1" style="width:698px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/677818bb0a92462fa932e565b9cf0fa8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®ºè¿‡çš„æŒ‡ä»¤ã€‚ å› æ­¤ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ç»“æ„ä¸­çš„æ¯ä¸ªåŒºåŸŸã€‚</span></span></p></div><h2 id="https://www.notion.so/7c3d9d40a15841808d6ec3e3989a1a3a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/7c3d9d40a15841808d6ec3e3989a1a3a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">pipeline</strong></strong></span></span></h2><div id="https://www.notion.so/2c904d2a4b9f4e2cb6967bc8a35e582f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">pipeline</strong></code></span><span class="SemanticString"> æ˜¯ Declarative Pipeline çš„æ ¹èŠ‚ç‚¹ï¼Œç”¨äºå®šä¹‰æ•´ä¸ªæµæ°´çº¿çš„å¼€å§‹å’Œç»“æŸã€‚å®ƒåŒ…å«äº†æ•´ä¸ªæµæ°´çº¿çš„é…ç½®ä¿¡æ¯å’Œé˜¶æ®µå®šä¹‰ã€‚</span></span></p></div><h2 id="https://www.notion.so/46b6a71ac55d402895dc5eaf0a835803" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/46b6a71ac55d402895dc5eaf0a835803"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">agent</strong></strong></span></span></h2><div id="https://www.notion.so/6386936b863b425db24e74bd7d51d4e6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">agent</strong></code></span><span class="SemanticString"> ç”¨äºæŒ‡å®šæµæ°´çº¿çš„è¿è¡Œç¯å¢ƒï¼Œæ˜¯å¿…é¡»å­—æ®µã€‚å¯ä»¥æŒ‡å®šä½¿ç”¨ç‰¹å®šçš„è¿è¡Œç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">any</strong></code></span><span class="SemanticString"> è¡¨ç¤ºå¯ä»¥åœ¨ä»»ä½•å¯ç”¨çš„èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚ä¸‹é¢æ˜¯ä¸€äº›å…³äº </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">agent</strong></code></span><span class="SemanticString"> çš„è¯¦ç»†è¯´æ˜å’Œç¤ºä¾‹ï¼š</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/084753169bef4d40b7e2563c664109d7" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"> agent none</span></span><div id="https://www.notion.so/de9ae1245bf5415b91b29d33f5b48fbe" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å½“åœ¨é¡¶å±‚ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">agent none</strong></code></span><span class="SemanticString"> æ—¶ï¼Œå®ƒè¡¨ç¤ºæˆ‘ä»¬åœ¨å…¨å±€ä¸Šæ²¡æœ‰æŒ‡å®šä¸€ä¸ªä»£ç†èŠ‚ç‚¹ç”¨äºæ•´ä¸ªæµæ°´çº¿ã€‚è¿™æ„å‘³ç€å¦‚æœéœ€è¦çš„è¯ï¼Œå°†ä¸ºæ¯ä¸ªé˜¶æ®µå•ç‹¬æŒ‡å®šä¸€ä¸ªä»£ç†èŠ‚ç‚¹ã€‚</span></span></p></div><pre id="https://www.notion.so/13afe6904f254870a66b2fbcb1abc4ed" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
    agent none
    
    stages {
        stage(&#x27;Build&#x27;) {
            agent {
                label &#x27;my-build-agent&#x27; // ä¸º Build é˜¶æ®µæŒ‡å®šç‰¹å®šçš„ä»£ç†èŠ‚ç‚¹
            }
            steps {
                echo &#x27;Performing build...&#x27;
                // æ‰§è¡Œæ„å»ºæ“ä½œ
            }
        }
        
        stage(&#x27;Test&#x27;) {
            agent {
                label &#x27;my-test-agent&#x27; // ä¸º Test é˜¶æ®µæŒ‡å®šç‰¹å®šçš„ä»£ç†èŠ‚ç‚¹
            }
            steps {
                echo &#x27;Performing tests...&#x27;
                // æ‰§è¡Œæµ‹è¯•æ“ä½œ
            }
        }
        
        // æ›´å¤šçš„é˜¶æ®µå’Œæ­¥éª¤...
    }
    // ...
}</span></span></span></code></pre></li><li id="https://www.notion.so/d527a1fa15384afc922c37da3345473c" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">æŒ‡å®š Labels å¹¶è‡ªå®šä¹‰ workspace</span></span><pre id="https://www.notion.so/d3f6461181b045f3bbaccfccbca7a021" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
    agent {
        label &quot;&lt;lablename&gt;&quot;
				customWorkspace &quot;&lt;desired directory&gt;&quot;
    }
    // ...
}</span></span></span></code></pre></li><li id="https://www.notion.so/432e4ab141f845149e05b470c066acbb" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">Docker Agents</span></span><pre id="https://www.notion.so/815175039ec74685b106c977b935f001" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
    agent {
        docker {
            image &#x27;maven:3.8.3&#x27; // æŒ‡å®šè¦ä½¿ç”¨çš„ Docker é•œåƒ
            label &#x27;docker-agent&#x27; // æŒ‡å®š Docker Agent èŠ‚ç‚¹çš„æ ‡ç­¾æˆ–åç§°
						args &#x27;-v /dir:dir&#x27;  // æŒ‡å®šè¿è¡Œå‚æ•°
        }
    }
    // ...
}</span></span></span></code></pre></li><li id="https://www.notion.so/59627cdc47c24bddbc9091bbd388dc3c" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">K8S Agents</span></span><pre id="https://www.notion.so/526d158509f148559a5af4951552a804" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
    agent {
        kubernetes {
            // Kubernetes agent é…ç½®é€‰é¡¹
            label &#x27;my-k8s-agent&#x27; // å¯é€‰ï¼šæŒ‡å®šè¦ä½¿ç”¨çš„ Kubernetes agent èŠ‚ç‚¹çš„æ ‡ç­¾æˆ–åç§°
            yaml &#x27;&#x27;&#x27;
                // Kubernetes Pod é…ç½®
                apiVersion: v1
                kind: Pod
                metadata:
                  name: my-pod
                spec:
                  containers:
                  - name: my-container
                    image: my-image
                    command:
                    - sleep
                    - &#x27;3600&#x27;
            &#x27;&#x27;&#x27;
        }
    }
    // ...
}
</span></span></span></code></pre></li></ol><h2 id="https://www.notion.so/1c4a606c4f9841df8f632ba438ae75c3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/1c4a606c4f9841df8f632ba438ae75c3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">environment</strong></strong></span></span></h2><div id="https://www.notion.so/c0c1d8768f88431180a1737cfa98acc5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">environment</strong></code></span><span class="SemanticString"> ç”¨äºå®šä¹‰æµæ°´çº¿æ‰§è¡ŒæœŸé—´çš„ç¯å¢ƒå˜é‡ã€‚å¯ä»¥åœ¨å…¨å±€èŒƒå›´å†…å®šä¹‰å…¨å±€ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥åœ¨ç‰¹å®šçš„é˜¶æ®µæˆ–æ­¥éª¤ä¸­å®šä¹‰å±€éƒ¨ç¯å¢ƒå˜é‡ã€‚ä¸‹é¢å±•ç¤ºå¦‚ä½•åœ¨æµæ°´çº¿ä¸­ä½¿ç”¨ï¼š</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/a3da8819b7384a028f79bc9c6c9dd5b7" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">å®šä¹‰ç¯å¢ƒå˜é‡</span></span><pre id="https://www.notion.so/786fca60f4734fba9cfe16f21af209f6" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>environment {
	TIMEZONE = &quot;eastern&quot;
	TIMEZONE_DS = &quot;${TIMEZONE}_daylight_savings&quot;
}</span></span></span></code></pre></li><li id="https://www.notion.so/d37a4b0a89a547279053fe1ac299b983" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">Credentials and environment variables</span></span><pre id="https://www.notion.so/4491897b687b4e9da84f7691b544572b" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
    agent any
    
    environment {
        MY_CREDENTIALS = credentials(&#x27;my-credentials-id&#x27;)  // ä½¿ç”¨å‡­æ® ID å¼•ç”¨ç”¨æˆ·åå’Œå¯†ç å‡­æ®
        API_KEY = credentials(&#x27;api-key-id&#x27;)  // ä½¿ç”¨å‡­æ® ID å¼•ç”¨ API å¯†é’¥å‡­æ®ï¼Œå¹¶æŒ‡å®šå˜é‡å
    }
    
    stages {
        stage(&#x27;Build&#x27;) {
            steps {
                withCredentials([usernamePassword(credentialsId: env.MY_CREDENTIALS, passwordVariable: &#x27;PASSWORD&#x27;, usernameVariable: &#x27;USERNAME&#x27;)]) {
                    echo &quot;Username: ${env.USERNAME}&quot;
                    echo &quot;Password: ${env.PASSWORD}&quot;
                    // æ‰§è¡Œæ„å»ºæ“ä½œï¼Œå¯ä»¥ä½¿ç”¨å‡­æ®ä¸­çš„ç”¨æˆ·åå’Œå¯†ç 
                }
            }
        }
        
        // æ›´å¤šçš„é˜¶æ®µå’Œæ­¥éª¤...
    }
    
    post {
        always {
            withCredentials([string(credentialsId: env.API_KEY, variable: &#x27;API_TOKEN&#x27;)]) {
                echo &quot;API Token: ${env.API_TOKEN}&quot;
                
                // å®Œæˆæ“ä½œï¼Œå¯ä»¥ä½¿ç”¨å‡­æ®ä¸­çš„ API å¯†é’¥
            }
        }
    }
}</span></span></span></code></pre></li></ol><h2 id="https://www.notion.so/a87e1111e4724656b437b8dcbc0e4386" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/a87e1111e4724656b437b8dcbc0e4386"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">tools</strong></strong></span></span></h2><div id="https://www.notion.so/85690e4eee40485ea4cd83b959389376" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">tools</strong></code></span><span class="SemanticString"> ç”¨äºæŒ‡å®šæµæ°´çº¿æ‰€éœ€çš„å·¥å…·ï¼ˆè½¯ä»¶æˆ–æ’ä»¶ï¼‰ã€‚é€šè¿‡ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">tools</strong></code></span><span class="SemanticString">ï¼Œæ‚¨å¯ä»¥ç¡®ä¿æµæ°´çº¿åœ¨æ‰§è¡ŒæœŸé—´ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„å·¥å…·ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨æµæ°´çº¿ä¸­ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">tools</strong></code></span><span class="SemanticString">ï¼š</span></span></p></div><pre id="https://www.notion.so/80eaad7019304dba9811e18c9f3be814" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
    agent any
    
    tools {
        // æŒ‡å®šå·¥å…·çš„åç§°å’Œç‰ˆæœ¬
        maven &#x27;Maven 3.8.1&#x27;
        jdk &#x27;JDK 11&#x27;
    }
    
    stages {
        stage(&#x27;Build&#x27;) {
            steps {
                // åœ¨ Build é˜¶æ®µä¸­ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬çš„å·¥å…·
                sh &#x27;mvn --version&#x27;
                
                // æ‰§è¡Œå…¶ä»–æ„å»ºæ“ä½œ
            }
        }
        
        // æ›´å¤šçš„é˜¶æ®µå’Œæ­¥éª¤...
    }
}</span></span></span></code></pre><h2 id="https://www.notion.so/14ff25b42dfe413abac6be591e06cd9d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/14ff25b42dfe413abac6be591e06cd9d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">options</strong></strong></span></span></h2><div id="https://www.notion.so/367fb828910649cf80e77e5420afb12f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">options</strong></code></span><span class="SemanticString"> ç”¨äºé…ç½®æµæ°´çº¿çš„é€‰é¡¹å’Œå…¨å±€è®¾ç½®ã€‚é€šè¿‡ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">options</strong></code></span><span class="SemanticString">ï¼Œå¯ä»¥å®šä¹‰æµæ°´çº¿çš„è¡Œä¸ºã€é”™è¯¯å¤„ç†ã€å¹¶å‘æ€§ç­‰æ–¹é¢çš„è®¾ç½®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„é€‰é¡¹ç¤ºä¾‹ï¼š</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/0cfc034968364553b67631ec37f42f5a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">timeout</strong></code></span><span class="SemanticString">ï¼šç”¨äºè®¾ç½®æµæ°´çº¿çš„è¶…æ—¶æ—¶é—´ï¼ŒæŒ‡å®šæµæ°´çº¿åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰å®Œæˆæ—¶åº”è¯¥è¢«ä¸­æ–­ã€‚</span></span></li><li id="https://www.notion.so/b360018c3f344d3689fc844fa2f8d7a8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">skipDefaultCheckout</strong></code></span><span class="SemanticString">ï¼šç”¨äºè·³è¿‡é»˜è®¤çš„ä»£ç æ£€å‡ºæ“ä½œï¼Œå½“æ‚¨çš„æµæ°´çº¿ä¸éœ€è¦è¿›è¡Œä»£ç æ£€å‡ºæ—¶ä½¿ç”¨</span></span></li><li id="https://www.notion.so/4af03435af3b4d23afadd98288e37528" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">disableConcurrentBuilds</strong></code></span><span class="SemanticString">ï¼šç”¨äºç¦æ­¢å¹¶å‘æ„å»ºï¼Œç¡®ä¿åŒä¸€æµæ°´çº¿çš„å¤šä¸ªå®ä¾‹ä¸ä¼šåŒæ—¶è¿è¡Œ</span></span></li><li id="https://www.notion.so/f21cd51a4b50451e8b31397780275fb1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">timestamps</strong></code></span><span class="SemanticString">ï¼šç”¨äºåœ¨æµæ°´çº¿æ—¥å¿—ä¸­æ˜¾ç¤ºæ—¶é—´æˆ³ï¼Œæ–¹ä¾¿è·Ÿè¸ªå’Œè°ƒè¯•</span></span></li><li id="https://www.notion.so/a79fb3afbb5a489bb9c9a819cec2caab" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">retry</strong></code></span><span class="SemanticString">ï¼šç”¨äºåœ¨æ­¥éª¤æˆ–é˜¶æ®µå¤±è´¥æ—¶è¿›è¡Œé‡è¯•</span></span></li></ul><div id="https://www.notion.so/f414ece179ee4aab93be7b9ac937596e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">â€¦</span></span></p></div><pre id="https://www.notion.so/4ea36ddaf9c04c4ca078fa6252c5912c" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
    agent any
    
    options {
        timeout(time: 1, unit: &#x27;HOURS&#x27;)
        disableConcurrentBuilds()
        timestamps()
    }
    
    stages {
        stage(&#x27;Build&#x27;) {
            options {
                retry(3)
            }
            steps {
                // æ‰§è¡Œæ„å»ºæ“ä½œ
            }
        }
        
        // æ›´å¤šçš„é˜¶æ®µå’Œæ­¥éª¤...
    }
}</span></span></span></code></pre><h2 id="https://www.notion.so/7fe764c5c66c4fd58375d6b040ea6d8c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/7fe764c5c66c4fd58375d6b040ea6d8c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">triggers</strong></strong></span></span></h2><div id="https://www.notion.so/b84fd67c9ecd4827b732d4f9b905294c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">triggers</strong></code></span><span class="SemanticString"> ç”¨äºé…ç½®æµæ°´çº¿çš„è§¦å‘å™¨ã€‚è§¦å‘å™¨å®šä¹‰äº†è§¦å‘æµæ°´çº¿æ‰§è¡Œçš„æ¡ä»¶å’Œäº‹ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„è§¦å‘å™¨ç¤ºä¾‹ï¼š</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/ebd9f99928f04018a8f8a3a91a55f83a" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">cron</strong></code></span><span class="SemanticString"> ï¼šåŸºäº cron è¡¨è¾¾å¼çš„å®šæ—¶è§¦å‘å™¨ï¼Œå¯ä»¥æŒ‰ç…§æŒ‡å®šçš„æ—¶é—´é—´éš”æˆ–ç‰¹å®šçš„æ—¶é—´ç‚¹è§¦å‘æµæ°´çº¿çš„æ‰§è¡Œã€‚ç¤ºä¾‹ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</span></span><pre id="https://www.notion.so/162c51001fe2496790a271004686c7b8" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>triggers {
    cron(&#x27;H 0 * * *&#x27;) // æ¯å¤©å‡Œæ™¨æ‰§è¡Œ
}</span></span></span></code></pre></li><li id="https://www.notion.so/fad68273451e4601a3c85dd30e41c129" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">pollSCM</strong></code></span><span class="SemanticString"> ï¼šç”¨äºå®šæœŸè½®è¯¢æºä»£ç ç®¡ç†ç³»ç»Ÿ (SCM)ï¼Œå½“æ£€æµ‹åˆ°ä»£ç å˜æ›´æ—¶è§¦å‘æµæ°´çº¿çš„æ‰§è¡Œã€‚ç¤ºä¾‹ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</span></span><pre id="https://www.notion.so/b6378e2a42024e0a8641b708a1375767" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>triggers {
    pollSCM(&#x27;H/5 * * * *&#x27;) // æ¯ 5 åˆ†é’Ÿè½®è¯¢ä¸€æ¬¡
}</span></span></span></code></pre></li><li id="https://www.notion.so/33181d14ac374220b6fdaf58d7e4a1e5" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">upstream</strong></code></span><span class="SemanticString"> ï¼šå½“æŒ‡å®šçš„ä¸Šæ¸¸æµæ°´çº¿å®Œæˆå¹¶æˆåŠŸæ‰§è¡Œæ—¶è§¦å‘å½“å‰æµæ°´çº¿çš„æ‰§è¡Œã€‚ç¤ºä¾‹ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</span></span><pre id="https://www.notion.so/09124bd7fa864d6abc16688b8f4b78d2" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>triggers {
    upstream(upstreamProjects: &#x27;my-upstream-pipeline&#x27;, threshold: &#x27;SUCCESS&#x27;)
}</span></span></span></code></pre></li><li id="https://www.notion.so/331d53cd49ce471e983a1d0867fd71b5" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">github</strong></code></span><span class="SemanticString"> ï¼šä¸ GitHub ä»£ç åº“é›†æˆï¼Œå½“å‘ç”Ÿ GitHub äº‹ä»¶ï¼ˆä¾‹å¦‚æ¨é€ã€æ‹‰å–è¯·æ±‚ç­‰ï¼‰æ—¶è§¦å‘æµæ°´çº¿çš„æ‰§è¡Œã€‚ç¤ºä¾‹ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</span></span><pre id="https://www.notion.so/d894f905ae0243f19e8761cab34ca428" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>triggers {
    githubPush()
}</span></span></span></code></pre></li></ol><h3 id="https://www.notion.so/df36a06c5f7e4fdfbdc3861b937735a1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/df36a06c5f7e4fdfbdc3861b937735a1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Cron syntax</span></span></h3><div id="https://www.notion.so/a64110bbe726467da7e1875f8f926c0b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Jenkins ä½¿ç”¨ Cron è¡¨è¾¾å¼æ¥é…ç½®å®šæ—¶ä»»åŠ¡çš„è°ƒåº¦ã€‚Cron è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”±ç©ºæ ¼åˆ†éš”çš„äº”ä¸ªæˆ–å…­ä¸ªå­—æ®µç»„æˆï¼Œæ¯ä¸ªå­—æ®µè¡¨ç¤ºä¸åŒçš„æ—¶é—´å•ä½å’Œæ—¶é—´èŒƒå›´ã€‚ä¸‹é¢æ˜¯ Cron è¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•ï¼š</span></span></p></div><pre id="https://www.notion.so/f916a9a395544803b812a21b92c5e67b" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>* * * * * *
| | | | | |
| | | | | +-- Year (å¯é€‰ï¼Œ1970-2099)
| | | | +---- Day of the Week (0-7ï¼ŒSunday=0æˆ–7)
| | | +------ Month (1-12)
| | +-------- Day of the Month (1-31)
| +---------- Hour (0-23)
+------------ Minute (0-59)</span></span></span></code></pre><div id="https://www.notion.so/1c0241a1e8fb4e32b7099d3403ca27a0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å­—æ®µå€¼å¯ä»¥æ˜¯å…·ä½“çš„æ•°å­—ï¼Œè¡¨ç¤ºç‰¹å®šçš„æ—¶é—´ç‚¹æˆ–æ—¶é—´å•ä½ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šé…ç¬¦ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">*</strong></code></span><span class="SemanticString"> è¡¨ç¤ºä»»æ„å€¼ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨é€—å· </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">,</strong></code></span><span class="SemanticString"> åˆ†éš”å¤šä¸ªå€¼ï¼Œä½¿ç”¨è¿å­—ç¬¦ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">-</strong></code></span><span class="SemanticString"> æŒ‡å®šèŒƒå›´ï¼Œä½¿ç”¨æ–œæ  </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">/</strong></code></span><span class="SemanticString"> æŒ‡å®šæ­¥é•¿ï¼Œä»¥åŠä½¿ç”¨é—®å· </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">?</strong></code></span><span class="SemanticString"> å’Œæ˜Ÿå· </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">*</strong></code></span><span class="SemanticString"> è¡¨ç¤ºä»»æ„å€¼ã€‚</span></span></p></div><div id="https://www.notion.so/8a4861fca312407c9edebc284fde9234" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">H</strong></code></span><span class="SemanticString"> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç¬¦å·ï¼Œè¡¨ç¤ºâ€œéšæœºå€¼â€ã€‚å½“ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">H</strong></code></span><span class="SemanticString"> ä½œä¸ºåˆ†é’Ÿå­—æ®µçš„å€¼æ—¶ï¼ŒJenkins å°†é€‰æ‹©ä¸€ä¸ªéšæœºçš„åˆ†é’Ÿå€¼æ¥æ‰§è¡Œä»»åŠ¡ã€‚è¿™æ ·å¯ä»¥å‡å°‘å¹¶å‘ä»»åŠ¡åœ¨åŒä¸€æ—¶é—´ç‚¹ä¸Šçš„ç«äº‰ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</span></span></p></div><div id="https://www.notion.so/75cf5a8a66da4928b9532454c15d7875" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/7d2be81dcb3f490ba4396ae3aff38b5d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">0 0 * * *</strong></code></span><span class="SemanticString">ï¼šæ¯å¤©å‡Œæ™¨é›¶ç‚¹æ‰§è¡Œä¸€æ¬¡</span></span></li><li id="https://www.notion.so/cd831fa6eff74e849f4df3f27e32ef52" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">H 4 * * 1-5</strong></code></span><span class="SemanticString">ï¼šæ¯ä¸ªå·¥ä½œæ—¥ï¼ˆæ˜ŸæœŸä¸€è‡³æ˜ŸæœŸäº”ï¼‰çš„ä¸Šåˆ 4 ç‚¹éšæœºåˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span></span></li><li id="https://www.notion.so/3ab1f8557d8b4d44a110f439bb72cb73" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">0 0 1,15 * *</strong></code></span><span class="SemanticString">ï¼šæ¯æœˆçš„1å·å’Œ15å·çš„åˆå¤œæ‰§è¡Œä¸€æ¬¡</span></span></li><li id="https://www.notion.so/0c55ab9700844f318755e8e4ba1fb889" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">0 0 * * 1</strong></code></span><span class="SemanticString">ï¼šæ¯ä¸ªæ˜ŸæœŸä¸€çš„å‡Œæ™¨æ‰§è¡Œä¸€æ¬¡</span></span></li><li id="https://www.notion.so/ddb70955ffd643d0b02ea59f2a899131" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">H * * * *</strong></code></span><span class="SemanticString">ï¼šæ¯å°æ—¶çš„éšæœºåˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</span></span></li><li id="https://www.notion.so/724c6bbd9b2b47f9a8e9b67ec9d2af2d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">H H(0-7) * * 1-5</strong></code></span><span class="SemanticString">ï¼šåœ¨æ¯ä¸ªå·¥ä½œæ—¥çš„éšæœºå°æ—¶å’Œéšæœºåˆ†é’Ÿæ‰§è¡Œä»»åŠ¡ï¼ˆå°æ—¶èŒƒå›´ä¸º 0-7ï¼‰</span></span></li></ul><h2 id="https://www.notion.so/4fc43bf3880c43c5a7d7d3eb45ae0590" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/4fc43bf3880c43c5a7d7d3eb45ae0590"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">parameters</strong></strong></span></span></h2><div id="https://www.notion.so/f40e8cd832f34c1e8423e6269363b0e1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"></span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">parameters</strong></code></span><span class="SemanticString"> ç”¨æ¥å®šä¹‰æµæ°´çº¿å‚æ•°ï¼Œä»¥ä¾¿åœ¨æµæ°´çº¿æ‰§è¡ŒæœŸé—´æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å€¼ã€‚</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/86aedc1e0fd84af6887dc6d67c5e6ae6" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">string</strong></code></span><span class="SemanticString"> å‚æ•°ï¼šç”¨äºæ¥æ”¶å­—ç¬¦ä¸²ç±»å‹çš„è¾“å…¥å€¼ã€‚</span></span><pre id="https://www.notion.so/642c1d8bf24b4b8eb0d188b5a17dea7c" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>parameters {
    string(name: &#x27;ENVIRONMENT&#x27;, defaultValue: &#x27;dev&#x27;, description: &#x27;Environment for deployment&#x27;)
}</span></span></span></code></pre></li><li id="https://www.notion.so/98d61ecabdf445889a1a1379d7781254" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">booleanParam</strong></code></span><span class="SemanticString"> å‚æ•°ï¼šç”¨äºæ¥æ”¶å¸ƒå°”ç±»å‹çš„è¾“å…¥å€¼ã€‚</span></span><pre id="https://www.notion.so/c4fe4858db7c4eb69a4971689eca1e92" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>parameters {
    booleanParam(name: &#x27;ENABLE_TESTS&#x27;, defaultValue: true, description: &#x27;Enable tests&#x27;)
}</span></span></span></code></pre></li><li id="https://www.notion.so/f065f9d5d31d40029c4c49abe1594b7f" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">choice</strong></code></span><span class="SemanticString"> å‚æ•°ï¼šç”¨äºæä¾›ä¸€ç»„é¢„å®šä¹‰çš„é€‰é¡¹ä¾›ç”¨æˆ·é€‰æ‹©ã€‚</span></span><pre id="https://www.notion.so/aaaf72e9f2ca455a9446e21c059ce42c" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>parameters {
    choice(name: &#x27;DATABASE_TYPE&#x27;, choices: [&#x27;MySQL&#x27;, &#x27;PostgreSQL&#x27;, &#x27;Oracle&#x27;], description: &#x27;Select database type&#x27;)
}</span></span></span></code></pre></li><li id="https://www.notion.so/231d378fc1e84c76b970bf09dc3e75d3" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">password</strong></code></span><span class="SemanticString"> å‚æ•°ï¼šç”¨äºæ¥æ”¶æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚å¯†ç ã€‚</span></span><pre id="https://www.notion.so/b3141bc66a7c4bbeb139a6a307ac2534" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>parameters {
    password(name: &#x27;API_KEY&#x27;, defaultValue: &#x27;&#x27;, description: &#x27;API key&#x27;)
}</span></span></span></code></pre></li><li id="https://www.notion.so/cf284b83b9ac46838656c9c298d52efb" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">file</strong></code></span><span class="SemanticString"> å‚æ•°ï¼šç”¨äºæ¥æ”¶æ–‡ä»¶ç±»å‹çš„è¾“å…¥å€¼ï¼Œç”¨æˆ·å¯ä»¥ä¸Šä¼ æ–‡ä»¶ã€‚</span></span><pre id="https://www.notion.so/037637b6586e409bbd28a8387a8870ff" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>parameters {
    file(name: &#x27;CONFIG_FILE&#x27;, description: &#x27;Upload configuration file&#x27;)
}</span></span></span></code></pre></li></ol><h2 id="https://www.notion.so/eed0b0f2a9db430c8ee91ceb94a647fe" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/eed0b0f2a9db430c8ee91ceb94a647fe"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">libraries</span></span></h2><div id="https://www.notion.so/7a1f288ff1dd4510b86dd3ff7f31746f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Jenkins Declarative Pipeline å…è®¸æ‚¨ä½¿ç”¨å…±äº«åº“ï¼ˆlibrariesï¼‰æ¥é‡ç”¨å’Œç»„ç»‡æµæ°´çº¿ä¸­çš„ä»£ç é€»è¾‘ã€‚</span></span></p></div><div id="https://www.notion.so/c40427721de845b9b1592668544cc4b3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å¯ä»¥é€šè¿‡ä»¥ä¸‹å½¢å¼åŠ è½½ librariesï¼š</span></span></p></div><pre id="https://www.notion.so/a1a4b7343c414f4d97e79ea9269ec504" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
     agent any
     libraries {
        lib(&quot;mylib@master&quot;)
        lib(&quot;alib&quot;)
    }
    stages {
       ...</span></span></span></code></pre><div id="https://www.notion.so/92a343e761d24c4ca281a304fb658cfa" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">åœ¨åé¢æˆ‘ä»¬å¯¹ shared libraries è¿›è¡Œè¯¦ç»†é˜è¿°ã€‚</span></span></p></div><h2 id="https://www.notion.so/18bda65e3b1149f690d82647a30f5670" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/18bda65e3b1149f690d82647a30f5670"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">stages</span></span></h2><div id="https://www.notion.so/c3e032f6fbb44041811884ad7f31b2c2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">stages</strong></code></span><span class="SemanticString"> æ®µè½ç”¨äºå®šä¹‰æµæ°´çº¿çš„å„ä¸ªé˜¶æ®µã€‚æµæ°´çº¿çš„æ‰§è¡Œè¢«åˆ’åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤ï¼ˆ</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">steps</strong></code></span><span class="SemanticString">ï¼‰æ¥æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚</span></span></p></div><h3 id="https://www.notion.so/e729fd5296c04f03aac900500e22e8d8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e729fd5296c04f03aac900500e22e8d8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">stage</span></span></h3><div id="https://www.notion.so/b1e3bd789c1a40109be2abcbc7280236" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">stage</strong></code></span><span class="SemanticString"> æ˜¯ç”¨äºå®šä¹‰æµæ°´çº¿ä¸­å•ä¸ªé˜¶æ®µçš„å…³é”®å­—ã€‚æ¯ä¸ª </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">stage</strong></code></span><span class="SemanticString"> ä»£è¡¨æµæ°´çº¿çš„ä¸€ä¸ªæ‰§è¡Œé˜¶æ®µï¼Œç”¨äºå°†ä»»åŠ¡åˆ’åˆ†ä¸ºé€»è¾‘ä¸Šçš„é˜¶æ®µã€‚</span></span></p></div><h3 id="https://www.notion.so/98aa974c61414ef48f7de40d80e7490a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/98aa974c61414ef48f7de40d80e7490a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">steps</span></span></h3><div id="https://www.notion.so/23da80963f6541f2a9ec406231b83b78" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">steps</strong></code></span><span class="SemanticString"> æ˜¯ç”¨äºå®šä¹‰æµæ°´çº¿ä¸­æ‰§è¡Œä»»åŠ¡çš„å…³é”®å­—ã€‚</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">steps</strong></code></span><span class="SemanticString"> æ®µè½ç”¨äºåŒ…å«ä¸€ç³»åˆ—æ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤ä»£è¡¨æµæ°´çº¿ä¸­çš„ä¸€ä¸ªæ‰§è¡ŒåŠ¨ä½œæˆ–å‘½ä»¤ã€‚</span></span></p></div><div id="https://www.notion.so/5ed83f66c0e2421a965e5a10356fb650" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æ¯ä¸ªæ­¥éª¤å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ DSL è¯­å¥ï¼Œä¾‹å¦‚ echoã€archiveArtifactsã€gitã€mail ç­‰ã€‚åœ¨è¿™ä¸ªçº§åˆ«ä¸Šï¼ŒDSL è¯­å¥çš„è¯­æ³•åœ¨ Scripted Pipeline å’Œ Declarative Pipeline ä¸­æ˜¯ç›¸åŒçš„ã€‚ç„¶è€Œï¼Œæ‚¨ä¸èƒ½ä½¿ç”¨ Groovy çš„é DSL è¯­å¥æˆ–ç»“æ„ï¼Œä¾‹å¦‚ if-then æˆ–èµ‹å€¼è¯­å¥ã€‚</span></span></p></div><pre id="https://www.notion.so/bb954e08a17e437dbc50782e0e36b032" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>steps {
    &lt;individual steps - i.e., DSL statements&gt;
}
// example
steps {
    echo &#x27;This is a message&#x27; // æ‰“å°æ¶ˆæ¯
    archiveArtifacts &#x27;build/**/*.jar&#x27; // å½’æ¡£æ„ä»¶
    git branch: &#x27;master&#x27;, url: &#x27;https://github.com/user/repo.git&#x27; // æ‰§è¡Œ Git æ“ä½œ
    mail to: &#x27;example@example.com&#x27;, subject: &#x27;Build Notification&#x27;, body: &#x27;Build successful&#x27; // å‘é€ç”µå­é‚®ä»¶
}</span></span></span></code></pre><h3 id="https://www.notion.so/38b1dd1f8f6e4c719bfcb78d815562fa" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/38b1dd1f8f6e4c719bfcb78d815562fa"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">when</span></span></h3><div id="https://www.notion.so/87fe33eb370942b29e0c3b7db215769f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">when</strong></code></span><span class="SemanticString"> æŒ‡ä»¤åŸºäºç‰¹å®šæ¡ä»¶æ¥æ§åˆ¶é˜¶æ®µçš„æ‰§è¡Œä¸å¦ã€‚</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">when</strong></code></span><span class="SemanticString"> æŒ‡ä»¤å…è®¸æ‚¨æŒ‡å®šä¸€ä¸ªæ¡ä»¶ï¼Œä»¥å†³å®šæ˜¯å¦æ‰§è¡Œæˆ–è·³è¿‡è¯¥é˜¶æ®µã€‚</span></span></p></div><pre id="https://www.notion.so/5352a7286a424c17b98d31b47d798926" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>stage(&#x27;Test&#x27;) {
    when {
        expression { currentBuild.result == &#x27;SUCCESS&#x27; }  // ä»…åœ¨ &#x27;Build&#x27; é˜¶æ®µæˆåŠŸæ—¶æ‰§è¡Œè¯¥é˜¶æ®µ
    }
    steps {
        // æµ‹è¯•æ­¥éª¤
    }
}</span></span></span></code></pre><div id="https://www.notion.so/43c71ac7e4284ee7b78a75008a25116b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">å¯ä»¥ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">and</strong></code></span><span class="SemanticString">ã€</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">or</strong></code></span><span class="SemanticString"> å’Œ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">not</strong></code></span><span class="SemanticString"> æ¥ç»„åˆæ¡ä»¶ï¼Œå®ç°æ›´å¤æ‚çš„æ¡ä»¶æ‰§è¡Œã€‚</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/4443c9bd2348418ab15f8365da48b04e" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">and</strong></code></span><span class="SemanticString"> è¿ç®—ç¬¦</span></span><pre id="https://www.notion.so/66ca5ff6d6c3430aacb14089805732bf" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>stage(&#x27;Build and Test&#x27;) {
    when {
        // ä»…åœ¨ &#x27;Build&#x27; å’Œ &#x27;Test&#x27; é˜¶æ®µéƒ½æˆåŠŸæ—¶æ‰§è¡Œè¯¥é˜¶æ®µ
        allOf {
            expression { currentBuild.getBuild(&#x27;Build&#x27;).result == &#x27;SUCCESS&#x27; }
            expression { currentBuild.getBuild(&#x27;Test&#x27;).result == &#x27;SUCCESS&#x27; }
        }
    }
    steps {
        // æ„å»ºå’Œæµ‹è¯•æ­¥éª¤
    }
}</span></span></span></code></pre></li><li id="https://www.notion.so/6b972dad9f9f420f8aa0be1a855c1ad9" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">or</strong></code></span><span class="SemanticString"> è¿ç®—ç¬¦</span></span><pre id="https://www.notion.so/e0aae8d31e5d423eaf80af9afdf0760d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>stage(&#x27;Deploy or Promote&#x27;) {
    when {
        // ä»…åœ¨ &#x27;Deploy&#x27; æˆ– &#x27;Promote&#x27; é˜¶æ®µè‡³å°‘ä¸€ä¸ªæˆåŠŸæ—¶æ‰§è¡Œè¯¥é˜¶æ®µ
        anyOf {
            expression { currentBuild.getBuild(&#x27;Deploy&#x27;).result == &#x27;SUCCESS&#x27; }
            expression { currentBuild.getBuild(&#x27;Promote&#x27;).result == &#x27;SUCCESS&#x27; }
        }
    }
    steps {
        // éƒ¨ç½²æˆ–ä¿ƒé”€æ­¥éª¤
    }
}</span></span></span></code></pre></li><li id="https://www.notion.so/a02ef87395ba41d38897df33487752a1" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">ä½¿ç”¨ </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">not</strong></code></span><span class="SemanticString"> è¿ç®—ç¬¦</span></span><pre id="https://www.notion.so/47a8b27e9e2d440eac2b19f5edae6584" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>stage(&#x27;Build if Not Skipped&#x27;) {
    when {
        // ä»…åœ¨ &#x27;Build&#x27; é˜¶æ®µæ²¡æœ‰è¢«è·³è¿‡æ—¶æ‰§è¡Œè¯¥é˜¶æ®µ
        not {
            expression { currentBuild.getBuild(&#x27;Build&#x27;).result == &#x27;SKIPPED&#x27; }
        }
    }
    steps {
        // æ„å»ºæ­¥éª¤
    }
}</span></span></span></code></pre></li></ol><div id="https://www.notion.so/78624c2763cf40698f35e628d54618c1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/a3ae5da7243240508fcfb5f9f3e9997e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">æ¯ä¸ª stages å¯ä»¥æœ‰å•ç‹¬çš„ post æ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬å°†ä¼šè¯¦ç»†è¯´æ˜ã€‚</span></span></p></div><h2 id="https://www.notion.so/7106313750ac4af9a6fb8c8b7fc6bdf6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/7106313750ac4af9a6fb8c8b7fc6bdf6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">post</span></span></h2><div id="https://www.notion.so/77d251770f784e7c9f23809ee9ad8616" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">post</strong></code></span><span class="SemanticString"> æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰åœ¨æµæ°´çº¿æ‰§è¡Œå®Œæˆåæ‰§è¡Œçš„æ­¥éª¤æˆ–æ“ä½œçš„æŒ‡ä»¤ã€‚å®ƒå…è®¸æ‚¨æŒ‡å®šä¸åŒçš„åç»­å¤„ç†æ­¥éª¤ï¼Œæ— è®ºæµæ°´çº¿æ‰§è¡ŒæˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚</span></span></p></div><div id="https://www.notion.so/2693122b7cea4cccb5a669eccacdf2e4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">post</strong></code></span><span class="SemanticString"> æŒ‡ä»¤å¯ä»¥åŒ…å«å¤šä¸ªå­æŒ‡ä»¤ï¼Œæ¯ä¸ªå­æŒ‡ä»¤å®šä¹‰äº†ç‰¹å®šçš„åç»­å¤„ç†æ“ä½œã€‚å¸¸ç”¨çš„å­æŒ‡ä»¤åŒ…æ‹¬ï¼š</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/43e1811221374687aea48508d1dc4dc3" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">always</strong></code></span><span class="SemanticString">ï¼šæ— è®ºæµæ°´çº¿æ‰§è¡Œç»“æœå¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ­¥éª¤ã€‚</span></span></li><li id="https://www.notion.so/4f66424e73dd4c3fb4453b23e9c49783" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">success</strong></code></span><span class="SemanticString">ï¼šä»…åœ¨æµæ°´çº¿æ‰§è¡ŒæˆåŠŸæ—¶æ‰§è¡Œçš„æ­¥éª¤ã€‚</span></span></li><li id="https://www.notion.so/329addbff3cf42688b30bf9c1e9acae4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">failure</strong></code></span><span class="SemanticString">ï¼šä»…åœ¨æµæ°´çº¿æ‰§è¡Œå¤±è´¥æ—¶æ‰§è¡Œçš„æ­¥éª¤ã€‚</span></span></li><li id="https://www.notion.so/246456c6a00f41d2836f0bb7dcdc2139" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">changed</strong></code></span><span class="SemanticString">ï¼šä»…åœ¨æµæ°´çº¿æ‰§è¡Œç»“æœå‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œçš„æ­¥éª¤ã€‚</span></span></li><li id="https://www.notion.so/f44f292806b64df19017867b3d6bc97c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">unstable</strong></code></span><span class="SemanticString">ï¼šä»…åœ¨æµæ°´çº¿æ‰§è¡Œç»“æœä¸ºä¸ç¨³å®šæ—¶æ‰§è¡Œçš„æ­¥éª¤ã€‚</span></span></li></ul><pre id="https://www.notion.so/c8f13637548945c49fc72cad3b9c2d9f" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>pipeline {
    agent any
    stages {
        // å®šä¹‰æµæ°´çº¿é˜¶æ®µ
    }
    post {
        always {
            // åœ¨æµæ°´çº¿æ‰§è¡Œå®Œæˆåå§‹ç»ˆæ‰§è¡Œçš„æ­¥éª¤
            echo &quot;Pipeline completed&quot;
        }
        success {
            // ä»…åœ¨æµæ°´çº¿æ‰§è¡ŒæˆåŠŸæ—¶æ‰§è¡Œçš„æ­¥éª¤
            echo &quot;Pipeline succeeded&quot;
        }
        failure {
            // ä»…åœ¨æµæ°´çº¿æ‰§è¡Œå¤±è´¥æ—¶æ‰§è¡Œçš„æ­¥éª¤
            echo &quot;Pipeline failed&quot;
        }
        changed {
            // ä»…åœ¨æµæ°´çº¿æ‰§è¡Œç»“æœå‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œçš„æ­¥éª¤
            echo &quot;Pipeline result changed&quot;
        }
        unstable {
            // ä»…åœ¨æµæ°´çº¿æ‰§è¡Œç»“æœä¸ºä¸ç¨³å®šæ—¶æ‰§è¡Œçš„æ­¥éª¤
            echo &quot;Pipeline unstable&quot;
        }
    }
}</span></span></span></code></pre><div id="https://www.notion.so/cccb1b9ffec944faabede92d3d11d3f8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></li></ol></article>
  <script src="https://utteranc.es/client.js"
        repo="fanxiangs/fanxiangs.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
  </script>
  <footer class="Footer">
  <div>&copy; CookBook 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>